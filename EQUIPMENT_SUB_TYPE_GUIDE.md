# üìò ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó" ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (sub_type)

## üéØ ‡∏™‡∏£‡∏∏‡∏õ Feature

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó" (sub_type) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á **‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏ï** ‡πÑ‡∏î‡πâ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô ‡πÄ‡∏ä‡πà‡∏ô:
- USB Type-C
- USB Lightning
- USB Micro
- C to Type-C
- C to Lightning
- ‡∏≠‡∏∑‡πà‡∏ô‡πÜ

---

## üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### 1. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á SQL ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÉ‡∏ô MySQL:

```sql
-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå sub_type
ALTER TABLE equipment 
ADD COLUMN sub_type VARCHAR(50) NULL AFTER model
COMMENT '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢ (usb-type-c, usb-lightning, usb-micro, c-type-c, c-lightning, other)';

-- ‡πÄ‡∏û‡∏¥‡πà‡∏° index
CREATE INDEX idx_equipment_sub_type ON equipment(sub_type);

-- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó comment ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á
ALTER TABLE equipment 
COMMENT = '‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏ï, ‡∏™‡∏≤‡∏¢‡∏ä‡∏≤‡∏£‡πå‡∏ï, ‡∏´‡∏π‡∏ü‡∏±‡∏á, ‡∏Ø‡∏•‡∏Ø) ‡∏û‡∏£‡πâ‡∏≠‡∏° sub_type';
```

‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå SQL Migration:
```bash
mysql -u root -p ilovephone_db < server/migrations/add_equipment_sub_type.sql
```

### 2. Restart Backend Server

```bash
cd server
npm restart
# ‡∏´‡∏£‡∏∑‡∏≠
pm2 restart ilovephone-backend
```

### 3. Hard Refresh Browser

**Windows/Linux:** `Ctrl + Shift + R`  
**Mac:** `Cmd + Shift + R`  
**‡∏´‡∏£‡∏∑‡∏≠:** ‡πÄ‡∏õ‡∏¥‡∏î DevTools > Network tab > ‡πÄ‡∏ä‡πá‡∏Ñ "Disable cache"

---

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏ï‡πÉ‡∏´‡∏°‡πà

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ **‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏´‡∏•‡πà**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏∞‡πÑ‡∏´‡∏•‡πà**
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: ‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏ï**
4. ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ü‡∏¥‡∏•‡∏î‡πå **"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"** ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:
   - USB Type-C
   - USB Lightning
   - USB Micro
   - C to Type-C
   - C to Lightning
   - ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
5. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏•‡∏¥‡∏Å **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å**

### 2. ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó

‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ **‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏´‡∏•‡πà** > ‡πÅ‡∏ó‡πá‡∏ö **‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏ï** ‡∏à‡∏∞‡∏°‡∏µ sub-tabs ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:
- **‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** (‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
- **USB Type-C** (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ USB Type-C)
- **USB Lightning** (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ USB Lightning)
- ‡πÅ‡∏•‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ

‡∏Ñ‡∏•‡∏¥‡∏Å sub-tab ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà badge ‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡∏ä‡∏∑‡πà‡∏≠ sub-tab

### 3. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß:**
1. ‡∏Ñ‡∏•‡∏¥‡∏Å **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç** ‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏ï
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó** ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
3. ‡∏Ñ‡∏•‡∏¥‡∏Å **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å**

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ sub_type ‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î" ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏à‡∏≤‡∏Å `model`, `brand`, `code`, ‡∏´‡∏£‡∏∑‡∏≠ `note` ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## üîß ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Developer

### Files Modified

1. **Frontend:**
   - `index.html` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå subType ‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
   - `script.js` - ‡πÄ‡∏û‡∏¥‡πà‡∏° logic ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

2. **Backend:**
   - `server/routes/equipment.js` - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö sub_type ‡πÉ‡∏ô POST/PUT routes

3. **Database:**
   - `server/migrations/add_equipment_sub_type.sql` - SQL migration

### API Changes

**POST /api/equipment:**
```json
{
  "type": "charger-set",
  "sub_type": "usb-type-c",  // ‚Üê NEW
  "code": "CH001",
  "brand": "Anker",
  ...
}
```

**PUT /api/equipment/:id:**
```json
{
  "type": "charger-set",
  "sub_type": "usb-lightning",  // ‚Üê NEW
  ...
}
```

### Database Schema

```sql
equipment (
  id VARCHAR(255) PRIMARY KEY,
  type VARCHAR(50),
  code VARCHAR(100),
  brand VARCHAR(100),
  model VARCHAR(100),
  sub_type VARCHAR(50),  -- ‚Üê NEW FIELD
  quantity INT,
  cost_price DECIMAL(10,2),
  sale_price DECIMAL(10,2),
  import_date DATE,
  note TEXT,
  store VARCHAR(50),
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)
```

### JavaScript Functions

- `toggleEquipmentSubType()` - ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏ü‡∏¥‡∏•‡∏î‡πå subType ‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
- `saveEquipment()` - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sub_type
- `loadEquipmentForEdit()` - ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sub_type ‡∏ï‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
- `displayEquipmentByTab()` - ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏° sub_type
- `updateEquipmentCounts()` - ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° sub_type

---

## ‚ö†Ô∏è Troubleshooting

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏ü‡∏¥‡∏•‡∏î‡πå "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó" ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
1. Hard refresh browser (Cmd/Ctrl + Shift + R)
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: ‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏ï** ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
3. ‡πÄ‡∏ä‡πá‡∏Ñ Console log ‡∏ß‡πà‡∏≤‡∏°‡∏µ error ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏±‡∏ô SQL migration ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á:
   ```sql
   DESCRIBE equipment;
   -- ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ sub_type column
   ```
2. Restart backend server
3. ‡∏î‡∏π backend logs ‡∏ß‡πà‡∏≤‡∏°‡∏µ error ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Sub-tabs ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ sub_type ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á:
   ```sql
   SELECT id, code, brand, sub_type 
   FROM equipment 
   WHERE type = 'charger-set';
   ```
2. ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° sub_type

---

## üìû Support

‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠:
1. ‡∏î‡∏π Console log ‡πÉ‡∏ô Browser DevTools
2. ‡∏î‡∏π Backend logs: `pm2 logs ilovephone-backend`
3. ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤

---

**Version:** 1.0  
**Last Updated:** 19 ‡∏û.‡∏¢. 2568  
**‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤:** AI Assistant  

