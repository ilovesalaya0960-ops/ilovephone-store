# ЁЯФз р╕Др╕╣р╣Ир╕бр╕╖р╕нр╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓: р╕Кр╣Ир╕нр╕З "р╕Лр╕╖р╣Йр╕нр╕Ир╕▓р╕Б" р╣Бр╕ер╕░ "р╕лр╕бр╕зр╕Фр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З" р╣Др╕бр╣Ир╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е

## ЁЯОп р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ъ

р╣Ар╕бр╕╖р╣Ир╕нр╕Бр╕Фр╣Бр╕Бр╣Йр╣Др╕Вр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З р╕Кр╣Ир╕нр╕З "р╕Лр╕╖р╣Йр╕нр╕Ир╕▓р╕Б" р╣Бр╕ер╕░ "р╕лр╕бр╕зр╕Фр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З" р╣Др╕бр╣Ир╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Др╕зр╣Й

## ЁЯФН р╕кр╕▓р╣Ар╕лр╕Хр╕╕р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щр╣Др╕Ыр╣Др╕Фр╣Й

1. тЬЕ р╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕Др╕нр╕ер╕▒р╕бр╕Щр╣М `purchased_from` р╣Бр╕ер╕░ `device_category`
2. тЪая╕П р╕Кр╕╖р╣Ир╕нр╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╣Гр╕Щ database р╣Др╕бр╣Ир╕Хр╕гр╕Зр╕Бр╕▒р╕Ър╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╣Гр╕Щр╣Вр╕Др╣Йр╕Ф (`store_id` vs `store`)

## ЁЯЫая╕П р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Бр╕ер╕░р╣Бр╕Бр╣Йр╣Др╕Вр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е

#### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 1: р╣Гр╕Кр╣Йр╣Др╕Яр╕ер╣М SQL р╕Чр╕╡р╣Ир╕гр╕зр╕бр╕Чр╕╕р╕Бр╕нр╕вр╣Ир╕▓р╕З (р╣Бр╕Щр╕░р╕Щр╕│)

```bash
cd /Users/chakkapong/Sites/ilovephone-store
mysql -u root -p mobile_shop_db < fix_missing_fields.sql
```

р╣Др╕Яр╕ер╣Мр╕Щр╕╡р╣Йр╕Ир╕░:
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╕лр╕гр╕╖р╕нр╕вр╕▒р╕З
- р╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡
- р╕Вр╣Йр╕▓р╕бр╣Др╕Ыр╕Цр╣Йр╕▓р╕бр╕╡р╣Бр╕ер╣Йр╕з
- р╣Бр╕кр╕Фр╕Зр╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕Зр╣Бр╕ер╕░р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З

#### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 2: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Фр╣Йр╕зр╕вр╕Хр╕Щр╣Ар╕нр╕З

```sql
-- 1. р╣Ар╕Вр╣Йр╕▓ MySQL
mysql -u root -p mobile_shop_db

-- 2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕З
DESCRIBE new_devices;

-- 3. р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╣Ар╕лр╣Зр╕Щ purchased_from р╣Бр╕ер╕░ device_category р╣Гр╕лр╣Йр╕гр╕▒р╕Щр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Щр╕╡р╣Й:
ALTER TABLE new_devices ADD COLUMN purchased_from VARCHAR(100) AFTER rom;
ALTER TABLE new_devices ADD COLUMN device_category ENUM('No Active', 'Active') DEFAULT 'No Active' AFTER purchased_from;
UPDATE new_devices SET device_category = 'No Active' WHERE device_category IS NULL;

-- 4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
DESCRIBE new_devices;

-- 5. р╕Фр╕╣р╕Вр╣Йр╕нр╕бр╕╣р╕е
SELECT id, brand, model, purchased_from, device_category FROM new_devices LIMIT 5;
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ API

```bash
# р╣Ар╕Ыр╕┤р╕Фр╣Др╕Яр╕ер╣М test р╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М
open /Users/chakkapong/Sites/ilovephone-store/test-new-device-fields.html

# р╕лр╕гр╕╖р╕н
http://localhost:8080/test-new-device-fields.html
```

р╣Гр╕Щр╕лр╕Щр╣Йр╕▓р╕Чр╕Фр╕кр╕нр╕Ъ:
1. р╕Др╕ер╕┤р╕Б "р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ API" - р╕Хр╣Йр╕нр╕Зр╣Ар╕лр╣Зр╕Щ purchased_from р╣Бр╕ер╕░ device_category
2. р╕Др╕ер╕┤р╕Б "р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е" - р╕Хр╣Йр╕нр╕Зр╣Ар╕лр╣Зр╕Щр╕Др╣Ир╕▓р╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З
3. р╕Чр╕Фр╕кр╕нр╕Ър╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╕░р╕нр╕▒р╕Юр╣Ар╕Фр╕Х

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Server р╕гр╕▒р╕Щр╕нр╕вр╕╣р╣И

```bash
cd server
npm start
```

Server р╕Др╕зр╕гр╕гр╕▒р╕Щр╕Чр╕╡р╣И `http://localhost:3000`

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 4: р╕Чр╕Фр╕кр╕нр╕Ър╣Гр╕Щр╣Ар╕зр╣Зр╕Ър╕Ир╕гр╕┤р╕З

1. р╕гр╕╡р╣Ар╕Яр╕гр╕Кр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ъ (Ctrl+Shift+R / Cmd+Shift+R)
2. р╕Др╕ер╕┤р╕Б "р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╣Гр╕лр╕бр╣И"
3. р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕е р╕гр╕░р╕Ър╕╕ "р╕Лр╕╖р╣Йр╕нр╕Ир╕▓р╕Б" р╣Бр╕ер╕░р╣Ар╕ер╕╖р╕нр╕Б "р╕лр╕бр╕зр╕Фр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З"
4. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б
5. р╕Др╕ер╕┤р╕Б "р╣Бр╕Бр╣Йр╣Др╕В" р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Кр╣Зр╕Др╕зр╣Ир╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕кр╕Фр╕Зр╕лр╕гр╕╖р╕нр╣Др╕бр╣И

## ЁЯФО р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ыр╕▒р╕Нр╕лр╕▓р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Console р╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М

1. р╕Бр╕Ф F12 р╣Ар╕Ыр╕┤р╕Ф Developer Tools
2. р╣Др╕Ыр╕Чр╕╡р╣Ир╣Бр╕Чр╣Зр╕Ъ Console
3. р╕Фр╕╣р╕зр╣Ир╕▓р╕бр╕╡ error р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
4. р╕ер╕нр╕Зр╣Бр╕Бр╣Йр╣Др╕Вр╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣М р╣Бр╕ер╣Йр╕зр╕Фр╕╣р╕зр╣Ир╕▓ API р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕░р╣Др╕гр╕Бр╕ер╕▒р╕Ър╕бр╕▓

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Network Request

1. р╣Ар╕Ыр╕┤р╕Ф Developer Tools (F12)
2. р╣Др╕Ыр╕Чр╕╡р╣Ир╣Бр╕Чр╣Зр╕Ъ Network
3. р╕Бр╕Фр╣Бр╕Бр╣Йр╣Др╕Вр╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣М
4. р╕Фр╕╣ request р╕Чр╕╡р╣Ир╣Ар╕гр╕╡р╕вр╕Б `/api/newDevices/{id}`
5. р╣Ар╕Кр╣Зр╕Д Response р╕зр╣Ир╕▓р╕бр╕╡ `purchased_from` р╣Бр╕ер╕░ `device_category` р╕лр╕гр╕╖р╕нр╣Др╕бр╣И

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Database Column Name

р╕бр╕╡р╣Вр╕нр╕Бр╕▓р╕кр╕Чр╕╡р╣И database р╣Гр╕Кр╣Йр╕Кр╕╖р╣Ир╕нр╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╕Хр╣Ир╕▓р╕Зр╕Ир╕▓р╕Бр╣Вр╕Др╣Йр╕Ф:

```sql
-- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Кр╕╖р╣Ир╕нр╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
SELECT COLUMN_NAME, COLUMN_TYPE 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_SCHEMA = 'mobile_shop_db' 
AND TABLE_NAME = 'new_devices'
ORDER BY ORDINAL_POSITION;
```

**р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╣Ар╕Кр╣Зр╕Д:**
- Database schema р╣Гр╕Кр╣Й `store_id` р╣Бр╕Хр╣Ир╣Вр╕Др╣Йр╕Фр╣Гр╕Кр╣Й `store` р╕лр╕гр╕╖р╕нр╣Ар╕Ыр╕ер╣Ир╕▓?
- р╕Цр╣Йр╕▓р╣Гр╕Кр╣И р╕Хр╣Йр╕нр╕Зр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Гр╕лр╣Йр╕Хр╕гр╕Зр╕Бр╕▒р╕Щ

## ЁЯУЭ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Фр╣Йр╕зр╕в SQL р╣Вр╕Фр╕вр╕Хр╕гр╕З

```sql
-- р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕ер╣Ир╕▓р╕кр╕╕р╕Ф 5 р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З
SELECT 
    id,
    brand,
    model,
    ram,
    rom,
    purchased_from,
    device_category,
    created_at
FROM new_devices 
ORDER BY created_at DESC 
LIMIT 5;
```

## тЪая╕П р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ър╕Ър╣Ир╕нр╕в

### р╕Ыр╕▒р╕Нр╕лр╕▓ 1: Column doesn't exist
**р╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф:** `Unknown column 'purchased_from'`  
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:** р╕гр╕▒р╕Щ migration SQL

### р╕Ыр╕▒р╕Нр╕лр╕▓ 2: р╕Др╣Ир╕▓р╣Ар╕Ыр╣Зр╕Щ null
**р╕нр╕▓р╕Бр╕▓р╕г:** р╕Яр╕┤р╕ер╕Фр╣Мр╕бр╕╡р╣Бр╕Хр╣Ир╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Ыр╣Зр╕Щ null  
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:** 
```sql
UPDATE new_devices SET device_category = 'No Active' WHERE device_category IS NULL;
```

### р╕Ыр╕▒р╕Нр╕лр╕▓ 3: р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕бр╣Ир╣Бр╕кр╕Фр╕Зр╣Ар╕зр╕ер╕▓р╣Бр╕Бр╣Йр╣Др╕В
**р╕нр╕▓р╕Бр╕▓р╕г:** р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Др╕Фр╣Й р╣Бр╕Хр╣Ир╣Бр╕Бр╣Йр╣Др╕Вр╣Бр╕ер╣Йр╕зр╣Др╕бр╣Ир╣Бр╕кр╕Фр╕З  
**р╕кр╕▓р╣Ар╕лр╕Хр╕╕:** JavaScript р╣Др╕бр╣Ир╣Др╕Фр╣Й set р╕Др╣Ир╕▓р╣Гр╕лр╣Й field  
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:** р╣Ар╕Кр╣Зр╕Др╕зр╣Ир╕▓ code р╣Гр╕Щ `openNewDeviceModal` р╕Хр╕гр╕Зр╕Бр╕▒р╕Ъ column name р╣Гр╕Щ database

## ЁЯОп Quick Check Script

р╕гр╕▒р╕Щ script р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Кр╣Зр╕Др╕Чр╕╕р╕Бр╕нр╕вр╣Ир╕▓р╕Зр╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Щ:

```bash
#!/bin/bash

echo "=== р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ъ ==="
echo ""

echo "1. р╣Ар╕Кр╣Зр╕Д MySQL Connection..."
mysql -u root -e "SELECT 1" 2>/dev/null && echo "тЬЕ MySQL р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╣Др╕Фр╣Й" || echo "тЭМ MySQL р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╣Др╕бр╣Ир╣Др╕Фр╣Й"

echo ""
echo "2. р╣Ар╕Кр╣Зр╕Д Database..."
mysql -u root -e "USE mobile_shop_db; SELECT 1" 2>/dev/null && echo "тЬЕ Database р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ" || echo "тЭМ Database р╣Др╕бр╣Ир╕Юр╕Ъ"

echo ""
echo "3. р╣Ар╕Кр╣Зр╕Др╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З..."
mysql -u root -e "USE mobile_shop_db; SHOW COLUMNS FROM new_devices WHERE Field IN ('purchased_from', 'device_category')" 2>/dev/null

echo ""
echo "4. р╣Ар╕Кр╣Зр╕Др╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З..."
mysql -u root -e "USE mobile_shop_db; SELECT id, brand, purchased_from, device_category FROM new_devices LIMIT 3" 2>/dev/null

echo ""
echo "5. р╣Ар╕Кр╣Зр╕Д Server..."
curl -s http://localhost:3000/api/newDevices?store=salaya > /dev/null && echo "тЬЕ Server р╕Чр╕│р╕Зр╕▓р╕Щр╕Ыр╕Бр╕Хр╕┤" || echo "тЭМ Server р╣Др╕бр╣Ир╕Хр╕нр╕Ър╕кр╕Щр╕нр╕З"

echo ""
echo "=== р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ ==="
```

## ЁЯУЮ р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕кр╕╕р╕Фр╕Чр╣Йр╕▓р╕в

р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕Чр╕│р╕Чр╕╕р╕Бр╕нр╕вр╣Ир╕▓р╕Зр╣Бр╕ер╣Йр╕з:

1. тЬЕ Restart Server
2. тЬЕ р╕гр╕╡р╣Ар╕Яр╕гр╕Кр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М (Hard Refresh)
3. тЬЕ Clear Browser Cache
4. тЬЕ р╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╣Гр╕лр╕бр╣И
5. тЬЕ р╕Чр╕Фр╕кр╕нр╕Ър╣Бр╕Бр╣Йр╣Др╕Вр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З

---

**р╕лр╕▓р╕Бр╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Ьр╕е:**
1. р╕кр╣Ир╕Зр╕ар╕▓р╕Юр╕лр╕Щр╣Йр╕▓р╕Ир╕н Console (F12) р╕бр╕▓р╕Фр╕╣
2. р╕кр╣Ир╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Ир╕▓р╕Бр╕Др╕│р╕кр╕▒р╣Ир╕З `DESCRIBE new_devices`
3. р╕кр╣Ир╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Ир╕▓р╕Б test-new-device-fields.html

